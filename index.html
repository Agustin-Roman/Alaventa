<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var worAkbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!doctype html>
<html lang="es">
    <head>
        <title>Catálogo de Productos</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.3.2 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <!-- Estilos personalizados -->
        <link href="styles.css" rel="stylesheet">
    </head>

    <body>
        <header>
            <!-- Botón de configuración con ícono de engranaje -->
            <button class="btn btn-secondary settings-btn" onclick="toggleAddForm()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.433 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c-1.79-.527-1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l-.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                </svg>
            </button>
        </header>
        <main>
            <!-- Formulario para agregar producto (oculto por defecto) -->
            <div class="add-product-form mt-5" id="addProductForm">
                <h3>Agregar Nuevo Producto</h3>
                <form id="productForm">
                    <div class="mb-3">
                        <label for="productName" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="productName" required>
                    </div>
                    <div class="mb-3">
                        <label for="productDescription" class="form-label">Descripción</label>
                        <textarea class="form-control" id="productDescription" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="productPrice" class="form-label">Precio ($)</label>
                        <input type="number" step="0.01" class="form-control" id="productPrice" required>
                    </div>
                    <div class="mb-3">
                        <label for="productImage" class="form-label">URL de la Imagen</label>
                        <input type="url" class="form-control" id="productImage" placeholder="https://ejemplo.com/imagen.jpg">
                    </div>
                    <button type="submit" class="btn btn-primary">Agregar Producto</button>
                </form>
            </div>

            <!-- Área de visualización de productos -->
            <div class="container my-5">
                <h1 class="text-center mb-4">Catálogo de Productos</h1>
                <div class="product-container" id="productContainer"></div>
            </div>
        </main>
        <footer>
            <!-- place footer here -->
        </footer>
        <!-- Bootstrap JavaScript Libraries -->
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"
        ></script>
        
        <!-- Referencia a productos.js -->
        <script src="productos.js"></script>
        <script>

            // Función para renderizar productos
            function renderizarProductos() {
                const contenedor = document.getElementById('productContainer');
                contenedor.innerHTML = '';
                productos.forEach(producto => {
                    const tarjetaProducto = document.createElement('div');
                    tarjetaProducto.className = 'card product-card';
                    tarjetaProducto.style.width = '18rem';
                    tarjetaProducto.innerHTML = `
                        <img src="${producto.imagen || 'https://via.placeholder.com/300x150?text=Sin+Imagen'}" class="product-image" alt="${producto.nombre}">
                        <div class="card-body">
                            <h5 class="card-title">${producto.nombre}</h5>
                            <p class="card-text">${producto.descripcion}</p>
                            <p class="card-text"><strong>Precio:</strong> $${producto.precio.toFixed(2)}</p>
                            <button class="btn btn-danger" onclick="eliminarProducto(${producto.id})">Eliminar</button>
                        </div>
                    `;
                    contenedor.appendChild(tarjetaProducto);
                });
            }

            // Función para mostrar/ocultar el formulario
            function toggleAddForm() {
                const formulario = document.getElementById('addProductForm');
                formulario.style.display = formulario.style.display === 'block' ? 'none' : 'block';
            }

            // Función para agregar un nuevo producto
            document.getElementById('productForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const nombre = document.getElementById('productName').value;
                const descripcion = document.getElementById('productDescription').value;
                const precio = parseFloat(document.getElementById('productPrice').value);
                const imagen = document.getElementById('productImage').value;
                const nuevoProducto = {
                    id: productos.length ? productos[productos.length - 1].id + 1 : 1,
                    nombre,
                    descripcion,
                    precio,
                    imagen
                };
                productos.push(nuevoProducto);
                renderizarProductos();
                this.reset();
                toggleAddForm(); // Ocultar formulario después de agregar
            });

            // Función para eliminar un producto
            function eliminarProducto(id) {
                const indice = productos.findIndex(producto => producto.id === id);
                if (indice !== -1) {
                    productos.splice(indice, 1);
                    renderizarProductos();
                }
            }

            // Renderizado inicial
            renderizarProductos();
        </script>
    </body>
</html>